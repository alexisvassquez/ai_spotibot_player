# AudioScript EBNF Grammar Spec (v0.2-dev)

# Updated to support lazy evaluation, FX chaining, `let`, and reactive syntax.

Script        = { Statement } ;

Statement     = Comment | Assignment | FunctionCall | Block | EmptyLine ;
Comment       = "#", { any character except line break } ;
EmptyLine     = ;

Assignment    = "let", Identifier, "=", Expression ;

Block         = "on", EventHook, "{" , { Statement }, "}" ;
EventHook     = "mood" , "(", String, ")" 
              | "track" , "(", String, ")" ;

FunctionCall  = Identifier, "(", [ ArgumentList ], ")", [ WithClause ] ;
ArgumentList  = Argument, { ",", Argument } ;
Argument      = String | Number | Identifier ;

WithClause    = "with", FXChain ;
FXChain       = FXName, { "+", FXName } ;
FXName        = Identifier ;

Expression    = FunctionCall 
              | ListLiteral 
              | Identifier ;

ListLiteral   = "[", [ ListElement, { ",", ListElement } ], "]" ;
ListElement   = String | Number ;

Identifier    = letter, { letter | digit | "_" } ;
String        = '"', { any character except '"' }, '"' ;
Number        = digit, { digit } ;

letter        = "A".."Z" | "a".."z" ;
digit         = "0".."9" ;
